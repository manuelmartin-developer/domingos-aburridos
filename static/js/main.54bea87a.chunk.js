(this.webpackJsonpdomingos=this.webpackJsonpdomingos||[]).push([[0],{100:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(39),o=n.n(c),s=(n(99),n(30)),i=(n(100),n(8)),l=n(11),u=n(174),b=n(177),p=n(31),j=n.n(p),d=(n(75),n(2));j.a.accessToken="pk.eyJ1IjoibW1hcnRpbmRqIiwiYSI6ImNrcjYxYnBnMzAxbXkydnBnemJ0eDBtZ2wifQ.JvTICi-_V8Uo5vgqyCjvfg";var f=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(-6.3707),r=Object(l.a)(n,1)[0],c=Object(a.useState)(39.4762),o=Object(l.a)(c,1)[0],s=Object(a.useState)(12),i=Object(l.a)(s,1)[0],p=Object(a.useState)((function(){return["stops-layer","L1-layer","L2-layer","L3-layer","L4-layer","L5-layer","L6-layer","L7-layer","L8-layer","LC-layer","RC-layer","RM-layer"]})),f=Object(l.a)(p,2),m=f[0],y=f[1],h=function(e){"visible"===t.current.getLayoutProperty(e,"visibility","none")?t.current.setLayoutProperty(e,"visibility","none"):t.current.setLayoutProperty(e,"visibility","visible")},O=function(e,n){t.current.addLayer({id:"".concat(e,"-layer"),type:"line",source:"route",layout:{"line-join":"round","line-cap":"round",visibility:"visible"},paint:{"line-color":n,"line-width":6,"line-opacity":.4},filter:["==","gtfs_route_shortName",e]})};return Object(a.useEffect)((function(){t.current||(t.current=new j.a.Map({container:e.current,style:"mapbox://styles/mapbox/dark-v10",center:[r,o],zoom:i}).addControl(new j.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0,showAccuracyCircle:!1})),t.current.on("load",(function(){t.current.addSource("route",{type:"geojson",data:"http://opendata.caceres.es/GetData/GetData?dataset=gtfs:Trip&format=geojson&geojson=LineString"}),O("L1","#F94144"),O("L2","#F3722C"),O("L3","#F8961E"),O("L4","#F9C74F"),O("L5","#90BE6D"),O("L6","#43AA8B"),O("L7","#577590"),O("L8","#98C1D9"),O("LC","#E0FBFC"),O("RM","#EE6C4D"),O("RC","#293241"),t.current.addSource("stops",{type:"geojson",data:"http://opendata.caceres.es/GetData/GetData?dataset=gtfs:Stop&format=geojson&geojson=Point"}),t.current.loadImage("https://img.icons8.com/external-those-icons-lineal-color-those-icons/96/000000/external-bus-stop-marketing-and-advertising-those-icons-lineal-color-those-icons.png",(function(e,n){if(e)throw e;t.current.addImage("bus_stop",n),t.current.addLayer({id:"stops-layer",type:"symbol",source:"stops",layout:{"icon-image":"bus_stop","icon-size":.25,visibility:"visible"}})})),t.current.on("click","stops-layer",(function(e){t.current.flyTo({center:e.features[0].geometry.coordinates,zoom:16}),(new j.a.Popup).setLngLat(e.features[0].geometry.coordinates).setHTML("<h3>".concat(e.features[0].properties.foaf_name,"</h3>")).addTo(t.current)})),t.current.on("mouseenter","stops-layer",(function(){t.current.getCanvas().style.cursor="pointer"})),t.current.on("mouseleave","stops-layer",(function(){t.current.getCanvas().style.cursor=""}))})))})),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("section",{className:"map",children:[Object(d.jsx)("div",{ref:e,className:"map-container"}),Object(d.jsx)("div",{className:"map-menu",children:Object(d.jsxs)(b.a,{value:m,onChange:function(e,t){y(t)},"aria-label":"layers shows",orientation:"vertical",sx:{backgroundColor:"RGBA(255, 255, 255, 0.9)"},children:[Object(d.jsx)(u.a,{value:"stops-layer","aria-label":"bold",onClick:function(){return h("stops-layer")},children:"Paradas"}),Object(d.jsx)(u.a,{value:"L1-layer","aria-label":"bold",onClick:function(){return h("L1-layer")},children:"L\xednea 1"}),Object(d.jsx)(u.a,{value:"L2-layer","aria-label":"bold",onClick:function(){return h("L2-layer")},children:"L\xednea 2"}),Object(d.jsx)(u.a,{value:"L3-layer","aria-label":"bold",onClick:function(){return h("L3-layer")},children:"L\xednea 3"}),Object(d.jsx)(u.a,{value:"L4-layer","aria-label":"bold",onClick:function(){return h("L4-layer")},children:"L\xednea 4"}),Object(d.jsx)(u.a,{value:"L5-layer","aria-label":"bold",onClick:function(){return h("L5-layer")},children:"L\xednea 5"}),Object(d.jsx)(u.a,{value:"L6-layer","aria-label":"bold",onClick:function(){return h("L6-layer")},children:"L\xednea 6"}),Object(d.jsx)(u.a,{value:"L7-layer","aria-label":"bold",onClick:function(){return h("L7-layer")},children:"L\xednea 7"}),Object(d.jsx)(u.a,{value:"L8-layer","aria-label":"bold",onClick:function(){return h("L8-layer")},children:"L\xednea 8"}),Object(d.jsx)(u.a,{value:"LC-layer","aria-label":"bold",onClick:function(){return h("LC-layer")},children:"L\xednea Campus"}),Object(d.jsx)(u.a,{value:"RC-layer","aria-label":"bold",onClick:function(){return h("RC-layer")},children:"Refuerzo Campus"}),Object(d.jsx)(u.a,{value:"RM-layer","aria-label":"bold",onClick:function(){return h("RM-layer")},children:"Refuerzo Mejostilla"})]})})]})})},m=function(){return Object(d.jsx)(f,{})},y=n(22),h=n.n(y),O=n(33),x=n(43),g=n.n(x),v=n(178),L=n(179),C=n(180),k=n(176),w=n(173),I=n(181),S=n(10),R=n.n(S),B=function(){var e="faa97c95",t="b5d0bb6f7664562553df2f6ae6598736",n=Object(a.useState)([]),r=Object(l.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)([]),i=Object(l.a)(s,2),u=i[0],b=i[1],p=R.a.icon({iconUrl:"https://img.icons8.com/external-those-icons-lineal-color-those-icons/24/000000/external-metro-wayfinding-those-icons-lineal-color-those-icons.png"});return Object(a.useEffect)((function(){Object(O.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get("https://api.tmb.cat/v1/transit/linies/metro?app_id=".concat(e,"&app_key=").concat(t));case 3:a=n.sent,o(a.data.features),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}),[]),Object(a.useEffect)((function(){Object(O.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get("https://api.tmb.cat/v1/transit/estacions?app_id=".concat(e,"&app_key=").concat(t));case 3:a=n.sent,b(a.data.features),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}),[]),Object(d.jsxs)(v.a,{className:"map-container",center:[41.38,2.16],zoom:12,scrollWheelZoom:!0,children:[Object(d.jsxs)(L.a,{position:"topright",children:[Object(d.jsx)(L.a.BaseLayer,{name:"Cl\xe1sico",children:Object(d.jsx)(C.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),Object(d.jsx)(L.a.BaseLayer,{checked:!0,name:"Blanco y negro",children:Object(d.jsx)(C.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"})})]}),c.map((function(e,t){return Object(d.jsx)(k.a,{data:e,color:"#".concat(e.properties.COLOR_LINIA)},t)})),u.map((function(e,t){return Object(d.jsx)(w.a,{position:[e.geometry.coordinates[1],e.geometry.coordinates[0]],icon:p,children:Object(d.jsxs)(I.a,{children:[Object(d.jsx)("h3",{children:e.properties.NOM_ESTACIO})," (",e.properties.PICTO,")"]})},t)}))]})},E=function(){return Object(d.jsx)(B,{})},F=n(89),M=n.n(F).a.mixin({toast:!0,position:"bottom-left",showConfirmButton:!1,timer:7e3,timerProgressBar:!0});j.a.accessToken="pk.eyJ1IjoibW1hcnRpbmRqIiwiYSI6ImNrcjYxYnBnMzAxbXkydnBnemJ0eDBtZ2wifQ.JvTICi-_V8Uo5vgqyCjvfg";var N=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(2),r=Object(l.a)(n,1)[0];return Object(a.useEffect)((function(){t.current||(t.current=new j.a.Map({container:e.current,style:"mapbox://styles/mapbox/satellite-v9",center:[-6.3707,39.4762],zoom:r}))})),Object(a.useEffect)((function(){t.current.on("load",Object(O.a)(h.a.mark((function e(){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return c=Object(O.a)(h.a.mark((function e(n){var a,r,c,o,s,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://api.wheretheiss.at/v1/satellites/25544");case 3:return a=e.sent,e.next=6,a.data;case 6:return r=e.sent,c=r.latitude,o=r.longitude,s=r.altitude,i=r.velocity,l=r.visibility,t.current.flyTo({center:[o,c],speed:.5,zoom:5}),t.current.on("click","iss",(function(e){M.fire({icon:"info",title:"<h3>Estaci\xf3n Espacial Internacional</h3>",html:"<b>Altitud: </b> ".concat(s.toFixed(2)," km <br/> <br/>\n              <b>Velocidad: </b> ").concat(i.toFixed(2)," km/h<br/> <br/>\n              <b>Visibilidad: </b> ").concat(l)})})),e.abrupt("return",{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,c]}}]});case 17:throw e.prev=17,e.t0=e.catch(0),n&&clearInterval(n),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),c.apply(this,arguments)},r=function(e){return c.apply(this,arguments)},e.next=4,r();case 4:n=e.sent,t.current.addSource("iss",{type:"geojson",data:n}),t.current.loadImage("https://img.icons8.com/external-tal-revivo-color-tal-revivo/48/000000/external-international-space-station-satellite-with-multiples-charging-solar-panel-astronomy-color-tal-revivo.png",(function(e,n){if(e)throw e;t.current.addImage("iss_icon",n)})),t.current.addLayer({id:"iss",type:"symbol",source:"iss",layout:{"icon-image":"iss_icon"}}),t.current.on("mouseenter","iss",(function(){t.current.getCanvas().style.cursor="pointer"})),t.current.on("mouseleave","iss",(function(){t.current.getCanvas().style.cursor=""})),a=setInterval(Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(a);case 2:n=e.sent,t.current.getSource("iss").setData(n);case 4:case"end":return e.stop()}}),e)}))),2e3);case 11:case"end":return e.stop()}}),e)}))))}),[]),Object(d.jsx)("section",{className:"map",children:Object(d.jsx)("div",{ref:e,className:"map-container"})})},_=function(){return Object(d.jsx)(N,{})},T=function(){return Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",component:m,exact:!0}),Object(d.jsx)(i.a,{path:"/barcelona",component:E,exact:!0}),Object(d.jsx)(i.a,{path:"/iss",component:_,exact:!0})]})},z=n.p+"static/media/logo.6d3ac2f1.png",A=n(91),D=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=function(){r(!1)};return Object(d.jsxs)(A.bubble,{width:"100%",left:!0,isOpen:n,onStateChange:function(e){return function(e){r(e.isOpen)}(e)},children:[Object(d.jsx)(s.b,{onClick:function(){return c()},className:"menu-item",to:"/",children:"Autobuses C\xe1ceres - Mapbox"}),Object(d.jsx)(s.b,{onClick:function(){return c()},className:"menu-item",to:"/barcelona",children:"Metro Barcelona - Leaflet"}),Object(d.jsx)(s.b,{onClick:function(){return c()},className:"menu-item",to:"/iss",children:"Estaci\xf3n Espacial Internacional - Mapbox"})]})},P=function(){return Object(d.jsx)("nav",{className:"nav",children:Object(d.jsx)(D,{})})},J=function(){return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)(P,{}),Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)("img",{className:"header-logo",src:z,alt:"logo"})})]})},G=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(J,{}),Object(d.jsx)(T,{})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root")),Y()},99:function(e,t,n){}},[[156,1,2]]]);
//# sourceMappingURL=main.54bea87a.chunk.js.map